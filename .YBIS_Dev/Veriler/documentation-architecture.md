# YBIS Documentation Architecture

**Purpose:** Dok√ºman hiyerar≈üisi, ownership modeli ve baƒüƒ±mlƒ±lƒ±k yapƒ±sƒ±  
**Created:** 2025-10-12  
**Status:** üéØ TASARIM A≈ûAMASI

---

## üìä Mevcut Durum Analizi

### Toplam Dok√ºman Sayƒ±sƒ±
- **Ana dizin (docs/):** 5 dosya
- **G√ºncel (docs/G√ºncel/):** 10 dosya
- **Ar≈üiv (docs/Archive/):** 46+ dosya
- **Epics/Stories/QA:** 4+ dosya
- **TOPLAM AKTƒ∞F:** ~19 dosya

### Tespit Edilen Sorunlar ‚ùå
1. **√áapraz baƒüƒ±mlƒ±lƒ±klar tanƒ±msƒ±z** - Hangi dok√ºman hangisine baƒülƒ± belli deƒüil
2. **Source of Truth belirsiz** - Aynƒ± bilgi birden fazla yerde
3. **G√ºncelleme cascade yok** - Bir deƒüi≈üiklik diƒüerlerini tetiklemiyor
4. **Ownership yok** - Her bilginin tek sahibi yok

---

## üèóÔ∏è YENƒ∞ DOK√úMANTASYON Mƒ∞MARƒ∞Sƒ∞

### Tier -1: STRATEGIC LAYER (Product & Business Vision) üåü

**Kural:** Projenin NEDEN'i ve NE'si burada. Teknik kararlar buradan t√ºrer.

```yaml
TIER_MINUS_1_STRATEGIC:
  
  Product_Requirements_Document:
    file: "docs/prd/PRODUCT_REQUIREMENTS.md"  # Legacy'den ta≈üƒ±nacak
    role: "Product Vision"
    authority: "STRATEGIC"
    owns:
      - product_vision
      - user_personas
      - feature_priorities
      - success_metrics
    derived_from: NONE
    status: "NEEDS_UPDATE (from legacy/prd.md)"
  
  Project_Vision:
    file: "docs/vision/PROJECT_VISION.md"  # Legacy'den ta≈üƒ±nacak
    role: "Why We Build"
    authority: "STRATEGIC"
    owns:
      - mission_statement
      - target_market
      - problem_statement
      - solution_approach
    derived_from: NONE
    status: "NEEDS_UPDATE (from legacy/project-vision.md)"
  
  Market_Research:
    file: "docs/strategy/MARKET_RESEARCH.md"  # Legacy'den ta≈üƒ±nacak
    role: "Market Analysis"
    authority: "STRATEGIC"
    owns:
      - market_size
      - competitor_analysis
      - user_research
      - market_opportunities
    derived_from: NONE
    status: "NEEDS_UPDATE (from legacy/market-research.md)"
  
  Competitive_Strategy:
    file: "docs/strategy/COMPETITIVE_STRATEGY.md"  # Legacy'den ta≈üƒ±nacak
    role: "Market Positioning"
    authority: "STRATEGIC"
    owns:
      - positioning
      - differentiation
      - go_to_market
      - competitive_advantages
    derived_from: NONE
    status: "NEEDS_UPDATE (from legacy/competitive-strategy.md)"
  
  Product_Roadmap:
    file: "docs/roadmap/PRODUCT_ROADMAP.md"  # Legacy + Archive'den birle≈ütir
    role: "Timeline & Phases"
    authority: "STRATEGIC"
    owns:
      - release_phases
      - milestone_timeline
      - feature_releases
      - version_planning
    derived_from:
      - Product_Requirements_Document (features)
      - Market_Research (priorities)
    status: "NEEDS_UPDATE (from legacy/development-plan.md + Archive/Product-Roadmap/)"
```

**‚ö†Ô∏è Kritik Nokta:** Tier -1 deƒüi≈üirse ‚Üí Tier 0 (Anayasa) yeniden deƒüerlendirilir!

---

### Tier 0: CANONICAL SOURCES (Single Source of Truth) üî•

**Kural:** Bu dok√ºmanlar TEKNIK bilginin TEK SAHƒ∞Bƒ∞Dƒ∞R. Tier -1'den esinlenir.

```yaml
TIER_0_CANONICAL:
  
  YBIS_PROJE_ANAYASASI:
    role: "Constitution"
    authority: "TECHNICAL_CANONICAL"
    owns:
      - port_architecture_principles
      - quality_gates
      - forbidden_patterns
      - tech_constraints
    derived_from:
      - Product_Requirements_Document (feature priorities inform architecture)
      - Competitive_Strategy (performance targets, differentiation)
    
  DEVELOPMENT_LOG:
    role: "Decision Registry"
    authority: "TECHNICAL_CANONICAL"
    owns:
      - architecture_decisions (AD-XXX)
      - completed_tasks
      - issues_and_fixes
      - timeline
    derived_from:
      - YBIS_PROJE_ANAYASASI (architecture constraints)
      - Product_Roadmap (timeline, milestones)
```

### Tier 1: REFERENCE DOCUMENTS (Derived, Read-Only)

**Kural:** Bu dok√ºmanlar TIER 0'dan t√ºrer. Manuel deƒüi≈üiklik YASAK!

```yaml
TIER_1_REFERENCE:
  
  tech-stack.md:
    role: "Technical Reference"
    authority: "DERIVED"
    owns: NOTHING
    derived_from:
      - DEVELOPMENT_LOG (AD-002, AD-015, etc.)
      - YBIS_PROJE_ANAYASASI (tech constraints)
    
  package-structure.md:
    role: "Implementation Blueprint"
    authority: "DERIVED"
    owns: NOTHING
    derived_from:
      - DEVELOPMENT_LOG (AD-001, AD-002, AD-003, AD-015)
      - YBIS_PROJE_ANAYASASI (port architecture)
    
  README.md:
    role: "Project Overview"
    authority: "DERIVED"
    owns: NOTHING
    derived_from:
      - DEVELOPMENT_LOG (status, progress)
      - tech-stack.md (versions)
```

### Tier 2: EXECUTION DOCUMENTS (Partially Derived)

**Kural:** Bu dok√ºmanlar hem t√ºretilmi≈ü hem de dinamik i√ßerik i√ßerir.

```yaml
TIER_2_EXECUTION:
  
  tasks.md:
    role: "Task List"
    authority: "HYBRID"
    owns:
      - task_checkboxes (dynamic)
      - task_completion_status (dynamic)
    derived_from:
      - DEVELOPMENT_LOG (AD-XXX decisions)
      - package-structure.md (implementation details)
    dynamic_content:
      - checkbox_status
      - completion_dates
    
  DEVELOPMENT_GUIDELINES.md:
    role: "Developer Rules"
    authority: "HYBRID"
    owns:
      - code_patterns
      - error_solutions
    derived_from:
      - YBIS_PROJE_ANAYASASI (core rules)
      - DEVELOPMENT_LOG (learned lessons)
```

### Tier 3: NAVIGATION & META (Auto-Generated)

**Kural:** Bu dok√ºmanlar otomatik generate edilir.

```yaml
TIER_3_META:
  
  DOCUMENTATION_INDEX.md:
    role: "Navigation"
    authority: "AUTO_GENERATED"
    owns: NOTHING
    generated_from:
      - all_document_frontmatter
      - file_structure
    
  QUICKSTART.md:
    role: "Getting Started"
    authority: "HYBRID"
    owns:
      - setup_steps (curated)
    derived_from:
      - tasks.md (first tasks)
      - tech-stack.md (versions)
```

---

## üîó DEPENDENCY GRAPH

### Bilgi Akƒ±≈üƒ± (Information Flow)

```
TIER -1 (STRATEGIC)
    ‚Üì shapes
TIER 0 (CANONICAL)
    ‚Üì derives
TIER 1 (REFERENCE)
    ‚Üì affects
TIER 2 (EXECUTION)
    ‚Üì generates
TIER 3 (META)
```

**√ñrnek Akƒ±≈ü:**
```
Market Research (Tier -1)
    ‚Üí "ADHD users need simple onboarding"
        ‚Üí PRD (Tier -1): Feature priority
            ‚Üí Anayasa (Tier 0): Architecture principle "Progressive disclosure"
                ‚Üí Development Log (Tier 0): AD-XXX decision
                    ‚Üí tech-stack (Tier 1): Expo Router (simple navigation)
                        ‚Üí tasks (Tier 2): T007 Configure Expo Router
```

### √ñrnek: "React Version" Bilgisi

```yaml
react_version:
  
  CANONICAL_SOURCE:
    file: "DEVELOPMENT_LOG.md"
    section: "AD-002"
    value: "19.1.0"
    last_updated: "2025-10-06"
  
  REFERENCES:
    - file: "tech-stack.md"
      locations:
        - line: 15 (Core Framework section)
        - line: 282 (Migration section)
        - line: 338 (Package versions)
    
    - file: "package-structure.md"
      locations:
        - line: 411 (mobile dependencies)
    
    - file: "README.md"
      locations:
        - line: 5 (Tech Stack header)
  
  UPDATE_RULE: |
    IF DEVELOPMENT_LOG.md#AD-002 changes:
      THEN update ALL references automatically
      AND log the cascade update
```

### √ñrnek: "Auth Strategy" Bilgisi

```yaml
auth_strategy:
  
  CANONICAL_SOURCE:
    file: "DEVELOPMENT_LOG.md"
    section: "AD-015"
    value: "Expo Auth Session (OAuth 2.0 + PKCE)"
    last_updated: "2025-10-11"
  
  REFERENCES:
    - file: "tech-stack.md"
      locations:
        - line: 281 (Auth section)
        - Auth Dependencies section
    
    - file: "package-structure.md"
      locations:
        - line: 22 (Key Decisions)
        - line: 1054 (Auth package structure)
        - line: 1091-1188 (ExpoAuthAdapter code)
        - line: 1674 (Port migration table)
    
    - file: "tasks.md"
      locations:
        - T020-T026 (Auth tasks section)
    
    - file: "YBIS_PROJE_ANAYASASI.md"
      locations:
        - AuthPort definition
  
  UPDATE_RULE: |
    IF DEVELOPMENT_LOG.md#AD-015 changes:
      THEN update ALL references
      AND create Migration Plan
      AND notify ALL agents
```

---

## üìã OWNERSHIP REGISTRY

### Kimse Neyin Sahibi?

```yaml
ownership_map:
  
  # Architecture Decisions
  architecture_decisions:
    owner: "DEVELOPMENT_LOG.md"
    format: "AD-XXX sections"
    update_frequency: "on_decision"
  
  # Tech Stack Versions
  package_versions:
    owner: "DEVELOPMENT_LOG.md"
    format: "AD-XXX (e.g., AD-002 for React)"
    references:
      - "tech-stack.md" (display)
      - "package-structure.md" (implementation)
  
  # Port Architecture
  port_definitions:
    owner: "YBIS_PROJE_ANAYASASI.md"
    format: "Section 2 (Port Architecture)"
    references:
      - "service-integration-strategy.md" (details)
      - "package-structure.md" (implementation)
  
  # Task Status
  task_completion:
    owner: "tasks.md"
    format: "Checkbox status"
    synced_to:
      - "DEVELOPMENT_LOG.md" (completion notes)
      - "README.md" (progress %)
  
  # Quality Standards
  quality_gates:
    owner: "YBIS_PROJE_ANAYASASI.md"
    format: "Section 3 (Quality Gates)"
    references:
      - "quality-standards.md" (detailed specs)
      - "DEVELOPMENT_GUIDELINES.md" (how to achieve)
  
  # Integration Strategy
  integration_roadmap:
    owner: "INTEGRATION_ROADMAP.md"
    format: "Phase definitions"
    references:
      - "service-integration-strategy.md" (patterns)
      - "tasks.md" (execution)
```

---

## üîÑ UPDATE CASCADE RULES

### Rule 1: Architecture Decision Changes

```yaml
trigger: "DEVELOPMENT_LOG.md AD-XXX modified"

cascade:
  - check: "tech-stack.md references"
  - check: "package-structure.md references"
  - check: "tasks.md affected tasks"
  - check: "YBIS_PROJE_ANAYASASI.md alignment"
  
notification:
  - agents: ["DevAgent", "ArchAgent", "DocAgent"]
  - checklist: "documentation-consistency-checklist.md"
```

### Rule 2: Constitution Changes

```yaml
trigger: "YBIS_PROJE_ANAYASASI.md modified"

cascade:
  - check: "ALL derived documents"
  - check: "service-integration-strategy.md"
  - check: "quality-standards.md"
  
notification:
  - severity: "CRITICAL"
  - agents: ["ALL"]
  - approval_required: true
```

### Rule 3: Task Completion

```yaml
trigger: "tasks.md checkbox checked"

cascade:
  - update: "DEVELOPMENT_LOG.md (add completion note)"
  - update: "README.md (update progress %)"
  
notification:
  - agents: ["DevAgent"]
  - checklist: "story-dod-checklist.md"
```

---

## üéØ √ñNERƒ∞LEN YAPILANDIRMA

### A≈üama 1: Canonical Sources Tanƒ±mla (Bu dosya) ‚úÖ
- [x] Tier 0 dok√ºmanlarƒ± belirle
- [x] Ownership registry olu≈ütur
- [x] Dependency graph √ßiz

### A≈üama 2: Documentation Map Olu≈ütur (Sonraki)
- [ ] `documentation-map.yaml` yaz
- [ ] Her dok√ºman i√ßin metadata
- [ ] Baƒüƒ±mlƒ±lƒ±k zincirleri

### A≈üama 3: Validation Script (Sonraki)
- [ ] Python script: `check-doc-consistency.py`
- [ ] Otomatik tutarsƒ±zlƒ±k tespiti
- [ ] Cascade update detector

### A≈üama 4: Automation (Gelecek)
- [ ] Pre-commit hook
- [ ] Interactive checklist
- [ ] Auto-sync system

---

## üö® KRƒ∞Tƒ∞K KURALLAR

### ‚úÖ DO's
1. **DEVELOPMENT_LOG.md** deƒüi≈ütiƒüinde ‚Üí T√ºm references kontrol et
2. **YBIS_PROJE_ANAYASASI.md** deƒüi≈ütiƒüinde ‚Üí Approval iste
3. **tasks.md** checkbox i≈üaretlendiƒüinde ‚Üí DEVELOPMENT_LOG'a not ekle
4. Her AD-XXX i√ßin ‚Üí Affected documents listele

### ‚ùå DON'Ts
1. **tech-stack.md'yi direkt deƒüi≈ütirme** ‚Üí DEVELOPMENT_LOG'dan t√ºret
2. **package-structure.md'yi manuel g√ºncelleme** ‚Üí AD-XXX'den al
3. **README.md version'unu elle yaz** ‚Üí Auto-generate et
4. **Aynƒ± bilgiyi 2 yerde canonical yapma** ‚Üí Tek source se√ß

---

## üìä MEVCUT DURUM ‚Üí HEDEFƒ∞

### √ñncesi (≈ûu an) ‚ùå
```
Legacy docs (unutulmu≈ü) ‚îÄ‚îÄ‚îê
DEVELOPMENT_LOG ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
tech-stack ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚Üí Hepsi birbirinden baƒüƒ±msƒ±z
package-structure ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     Deƒüi≈üiklik manuel yayƒ±lƒ±yor
tasks ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     Tutarsƒ±zlƒ±k garantili
README ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     Strategy ‚Üí Tech baƒülantƒ±sƒ± YOK
```

### Sonrasƒ± (Hedef) ‚úÖ
```
TIER -1 (STRATEGIC)
  ‚îú‚îÄ‚îÄ PRD (product vision)
  ‚îú‚îÄ‚îÄ Project Vision (why)
  ‚îú‚îÄ‚îÄ Market Research (user needs)
  ‚îú‚îÄ‚îÄ Competitive Strategy (positioning)
  ‚îî‚îÄ‚îÄ Product Roadmap (timeline)
         ‚Üì shapes
TIER 0 (CANONICAL)
  ‚îú‚îÄ‚îÄ YBIS_PROJE_ANAYASASI (tech constitution)
  ‚îî‚îÄ‚îÄ DEVELOPMENT_LOG (decisions)
         ‚Üì auto-cascade
TIER 1 (REFERENCE)
  ‚îú‚îÄ‚îÄ tech-stack (derived)
  ‚îú‚îÄ‚îÄ package-structure (derived)
  ‚îî‚îÄ‚îÄ README (derived)
         ‚Üì affects
TIER 2 (EXECUTION)
  ‚îú‚îÄ‚îÄ tasks (hybrid)
  ‚îî‚îÄ‚îÄ DEVELOPMENT_GUIDELINES (hybrid)
         ‚Üì generates
TIER 3 (META)
  ‚îú‚îÄ‚îÄ DOCUMENTATION_INDEX (auto)
  ‚îî‚îÄ‚îÄ QUICKSTART (auto)
```

---

## üì¶ LEGACY MIGRATION PLAN

### A≈üama 1: Strategic Docs G√ºncelleme (√ñncelikli)

**Hedef:** Legacy'deki stratejik dok√ºmanlarƒ± g√ºncelleyip aktif hale getir

```yaml
migration_tasks:
  
  TASK_1_PRD_UPDATE:
    source: "docs/Archive/Legacy/prd.md"
    target: "docs/prd/PRODUCT_REQUIREMENTS.md"
    status: "PENDING"
    actions:
      - Extract: User personas (still valid?)
      - Extract: Feature priorities (align with current tasks)
      - Extract: Success metrics (update for Closed Beta)
      - Remove: Outdated tech references (Firebase, etc.)
      - Add: Current tech stack alignment
      - Add: Tier 1 Port Architecture impact
    estimated_time: "2 hours"
  
  TASK_2_VISION_UPDATE:
    source: "docs/Archive/Legacy/project-vision.md"
    target: "docs/vision/PROJECT_VISION.md"
    status: "PENDING"
    actions:
      - Verify: Mission statement still accurate?
      - Update: Target market (ADHD focus?)
      - Update: Problem statement (current market)
      - Update: Solution approach (Expo + Port Architecture)
    estimated_time: "1 hour"
  
  TASK_3_ROADMAP_CONSOLIDATION:
    sources:
      - "docs/Archive/Legacy/development-plan.md"
      - "docs/Archive/Product-Roadmap/closed-beta-scope.md"
      - "docs/Archive/Product-Roadmap/open-beta-scope.md"
      - "docs/Archive/Product-Roadmap/mvp-release-scope.md"
    target: "docs/roadmap/PRODUCT_ROADMAP.md"
    status: "PENDING"
    actions:
      - Merge: All roadmap versions
      - Align: With current tasks.md
      - Update: Expo Auth Session (not Firebase)
      - Update: React 19.1.0 (not 19.2.0)
      - Add: Week-by-week breakdown
      - Cross-reference: tasks.md checkboxes
    estimated_time: "3 hours"
  
  TASK_4_MARKET_RESEARCH_UPDATE:
    source: "docs/Archive/Legacy/market-research.md"
    target: "docs/strategy/MARKET_RESEARCH.md"
    status: "PENDING"
    actions:
      - Update: Competitor analysis (2025 landscape)
      - Verify: User research (still valid?)
      - Add: Recent market trends
      - Update: ADHD app market insights
    estimated_time: "2 hours"
  
  TASK_5_COMPETITIVE_STRATEGY_UPDATE:
    source: "docs/Archive/Legacy/competitive-strategy.md"
    target: "docs/strategy/COMPETITIVE_STRATEGY.md"
    status: "PENDING"
    actions:
      - Update: Positioning vs competitors
      - Verify: Differentiation strategy
      - Update: Go-to-market plan
      - Align: With current Port Architecture advantage
    estimated_time: "1.5 hours"
```

**Toplam tahmini s√ºre:** ~9.5 saat

---

### A≈üama 2: Cross-Link Strategic ‚Üí Technical

**Hedef:** Tier -1 ‚Üí Tier 0 baƒülantƒ±larƒ± kur

```yaml
cross_linking:
  
  PRD_to_ANAYASA:
    - PRD'deki feature priorities ‚Üí Anayasa'da architecture principles
    - √ñrnek: "Fast onboarding" ‚Üí "Progressive disclosure pattern"
  
  VISION_to_DEVELOPMENT_LOG:
    - Vision'daki target users ‚Üí AD-XXX decisions
    - √ñrnek: "ADHD users" ‚Üí AD-015 (simple auth flow = Expo Auth)
  
  ROADMAP_to_TASKS:
    - Roadmap phases ‚Üí tasks.md weeks
    - Closed Beta scope ‚Üí Phase 0.1-0.4 tasks
    - Open Beta scope ‚Üí Phase 1.0 tasks (future)
  
  COMPETITIVE_to_TECH_STACK:
    - Performance targets ‚Üí tech choices
    - √ñrnek: "Faster than Notion" ‚Üí React 19.1 + Tamagui
```

---

### A≈üama 3: Legacy Archive Cleanup

**Ne yapƒ±lacak Legacy dosyalarla?**

```yaml
legacy_file_disposition:
  
  KEEP_AS_ARCHIVE:
    - architecture.md (historical tech decisions)
    - Chat √ºr√ºn architecture.md (initial product design)
    - modernization-session-22-sep-2025.md (transformation journey)
    reason: "Historical reference, shows evolution"
  
  MERGE_AND_DELETE:
    - prd.md ‚Üí docs/prd/PRODUCT_REQUIREMENTS.md
    - project-vision.md ‚Üí docs/vision/PROJECT_VISION.md
    - development-plan.md ‚Üí docs/roadmap/PRODUCT_ROADMAP.md
    - market-research.md ‚Üí docs/strategy/MARKET_RESEARCH.md
    - competitive-strategy.md ‚Üí docs/strategy/COMPETITIVE_STRATEGY.md
    reason: "G√ºncellendi, aktif hale getirildi"
  
  DELETE_OBSOLETE:
    - tech-stack-decisions.md (tech-stack.md'de var)
    - nodejs-version-analysis-report.md (irrelevant)
    - nodejs-version-correction.md (fixed)
    reason: "Artƒ±k gereksiz veya duplicate"
```

---

## ‚è≠Ô∏è SONRAKI ADIM

### Se√ßenek A: Legacy Migration First (√ñncelikli) üéØ
1. ‚úÖ PRD g√ºncellemesi (2 saat)
2. ‚úÖ Roadmap birle≈ütirme (3 saat)
3. ‚úÖ Cross-linking (1 saat)
4. ‚Üí Sonra `documentation-map.yaml`

**Avantaj:** Strategy ‚Üí Tech baƒülantƒ±sƒ± kurulur, proje felsefesi netle≈üir

### Se√ßenek B: Map First, Migrate Later
1. ‚úÖ `documentation-map.yaml` (mevcut durum i√ßin)
2. ‚úÖ Legacy migration
3. ‚Üí Map g√ºncelleme

**Avantaj:** √ñnce teknik sistem oturur, sonra strategic layer eklenir

---

**Hangisini √∂neriyorsun?**

Ben **Se√ßenek A**'yƒ± √∂neriyorum √ß√ºnk√º:
- PRD g√ºncel olmalƒ± ‚Üí Roadmap tutarlƒ± olmalƒ±
- Roadmap tutarlƒ± olmalƒ± ‚Üí tasks.md align olmalƒ±
- Strategy ‚Üí Tech baƒülantƒ±sƒ± kurulmalƒ± ‚Üí Sonra map anlamlƒ± olur

**Hangisiyle ba≈ülayalƒ±m? üöÄ**


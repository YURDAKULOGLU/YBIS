# Story 3.1: Supabase Setup - Implementation Guide

**Project:** YBIS  
**Project ID:** friyhdrhkpoztujhhelu  
**Date:** 2025-10-29  
**Status:** IN PROGRESS  

---

## âœ… COMPLETED

- [x] Supabase project created: "YBIS"
- [x] Project ID: friyhdrhkpoztujhhelu

---

## ğŸ“‹ NEXT STEPS (SEN YAPACAKSIN)

### **STEP 1: Enable Extensions (2 dakika)**

1. Supabase Dashboard'da sol menÃ¼den **"Database"** â†’ **"Extensions"** tÄ±kla
2. AÅŸaÄŸÄ±daki extension'larÄ± aktif et:

```sql
Extensions to Enable:
â˜ pgvector (for RAG/embeddings)
â˜ pg_cron (for scheduled flows)
â˜ uuid-ossp (for UUID generation - usually enabled)
```

**NasÄ±l yapÄ±lÄ±r:**
- Extension listesinde ara
- Toggle'Ä± ON yap
- Kaydet

---

### **STEP 2: Get API Keys (1 dakika)**

1. Sol menÃ¼den **"Settings"** â†’ **"API"** tÄ±kla
2. AÅŸaÄŸÄ±daki deÄŸerleri kopyala:

```env
# .env.local file'Ä±na ekle (root dizinde oluÅŸtur)

# Supabase Configuration
SUPABASE_URL=https://friyhdrhkpoztujhhelu.supabase.co
SUPABASE_ANON_KEY=<Project API keys â†’ anon public kÄ±smÄ±ndan kopyala>
SUPABASE_SERVICE_ROLE_KEY=<Project API keys â†’ service_role kÄ±smÄ±ndan kopyala>
```

**âš ï¸ Ã–NEMLÄ°:**
- `service_role` key'i GÄ°ZLÄ° tutmalÄ±sÄ±n! (Backend'de kullanÄ±lÄ±r)
- `anon` key public olabilir (Mobile app'de kullanÄ±lÄ±r)

---

### **STEP 3: Configure Authentication (3 dakika)**

1. Sol menÃ¼den **"Authentication"** â†’ **"Providers"** tÄ±kla
2. **Google** provider'Ä± aktif et:

**Google OAuth Setup:**
```
â˜ Google provider'da "Enable Sign in with Google" toggle'Ä± ON yap
â˜ Client ID: (ÅŸimdilik boÅŸ bÄ±rak - daha sonra Google Cloud Console'dan alacaÄŸÄ±z)
â˜ Client Secret: (ÅŸimdilik boÅŸ bÄ±rak)
â˜ Authorized redirect URLs: 
   - https://friyhdrhkpoztujhhelu.supabase.co/auth/v1/callback
â˜ SAVE
```

**Email/Password Setup:**
```
â˜ "Email" provider'da "Enable Email provider" toggle'Ä± ON yap
â˜ "Confirm email" DISABLE et (beta iÃ§in email confirmation kapalÄ±)
â˜ SAVE
```

---

### **STEP 4: Configure Project Settings (1 dakika)**

1. **"Settings"** â†’ **"General"** git
2. AyarlarÄ± kontrol et:

```
Project Name: YBIS âœ…
Organization: (kendi org'un)
Region: (en yakÄ±n region seÃ§ilmiÅŸ olmalÄ±)
Pause after inactivity: DISABLE (beta iÃ§in kapalÄ±)
```

---

### **STEP 5: Database URL (1 dakika)**

1. **"Settings"** â†’ **"Database"** git
2. Connection string'i kopyala:

```env
# .env.local'a ekle

DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.friyhdrhkpoztujhhelu.supabase.co:5432/postgres
```

**âš ï¸ NOT:** `[YOUR-PASSWORD]` kÄ±smÄ±nÄ± Supabase'in verdiÄŸi ÅŸifre ile deÄŸiÅŸtir!

---

## ğŸ“‚ CREATE .env.local FILE

Proje root'unda (C:\Projeler\YBIS\) ÅŸu dosyayÄ± oluÅŸtur:

```bash
# C:\Projeler\YBIS\.env.local

# Supabase Configuration
SUPABASE_URL=https://friyhdrhkpoztujhhelu.supabase.co
SUPABASE_ANON_KEY=<buraya anon key yapÄ±ÅŸtÄ±r>
SUPABASE_SERVICE_ROLE_KEY=<buraya service role key yapÄ±ÅŸtÄ±r>
DATABASE_URL=postgresql://postgres:<ÅÄ°FREN>@db.friyhdrhkpoztujhhelu.supabase.co:5432/postgres

# OpenAI (RAG ve AI iÃ§in - daha sonra)
OPENAI_API_KEY=<daha sonra eklenecek>

# App Configuration
NODE_ENV=development
```

---

## ğŸ”’ SECURITY: .gitignore Check

`.gitignore` dosyasÄ±nda ÅŸunlarÄ±n olduÄŸundan emin ol:

```bash
# Environment variables
.env
.env.local
.env*.local

# Supabase
supabase/.env
```

---

## âœ… VERIFICATION (DoÄŸrulama)

Hepsini yaptÄ±ktan sonra kontrol et:

```bash
# Terminal'de (C:\Projeler\YBIS dizininde)

# 1. .env.local dosyasÄ± var mÄ±?
ls .env.local

# 2. Ä°Ã§eriÄŸi doÄŸru mu?
cat .env.local
# (SUPABASE_URL, SUPABASE_ANON_KEY gÃ¶rÃ¼nmeli)

# 3. Extensions aktif mi?
# Supabase Dashboard â†’ Database â†’ Extensions
# pgvector ve pg_cron ENABLED olmalÄ±
```

---

## ğŸ“ STORY 3.1 CHECKLIST

```yaml
Story 3.1: Supabase Project Setup
Status: IN PROGRESS

Tasks:
  âœ… Create Supabase project (DONE)
  â˜ Enable pgvector extension
  â˜ Enable pg_cron extension
  â˜ Get API keys (anon + service_role)
  â˜ Create .env.local file
  â˜ Configure Google OAuth (basic setup)
  â˜ Enable Email/Password auth
  â˜ Disable email confirmation (beta)
  â˜ Verify .gitignore (security)

Estimated: 10 dakika
Actual: TBD

Next Story: 3.2 (Database Schema + RLS)
```

---

## ğŸ†˜ SORUN Ã‡IKARSA?

**Extension bulamÄ±yorsun?**
â†’ Database â†’ Extensions â†’ Search bar'a "pgvector" yaz

**API key nerede?**
â†’ Settings â†’ API â†’ Project API keys bÃ¶lÃ¼mÃ¼

**.env.local nereye?**
â†’ C:\Projeler\YBIS\.env.local (root dizin)

**Google OAuth ÅŸimdi mi gerekli?**
â†’ HayÄ±r! Basic setup yeterli, detaylarÄ± daha sonra (Story 3.3'te)

---

## ğŸ¯ BÄ°TÄ°NCE BÄ°LDÄ°R!

TÃ¼m adÄ±mlarÄ± tamamladÄ±ÄŸÄ±nda bana **"Story 3.1 done!"** de, 
hemen **Story 3.2'ye** geÃ§elim! (Database Schema oluÅŸturma)

---

**QUESTIONS?** Ask anytime! ğŸš€

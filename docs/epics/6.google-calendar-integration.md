# Epic 6: Google Calendar Integration

**ID:** 6  
**Status:** Draft  
**Owner:** @ybis-team  
**Created:** 2025-10-29  
**Target:** Closed Beta Launch (Week 5-6)  
**Priority:** P0 (Critical - Core Value Proposition)

---

## ðŸŽ¯ 1. Epic Goal

Google Calendar tam entegrasyonu oluÅŸturmak:
- âœ… CalendarPort + GoogleCalendarAdapter
- âœ… OAuth scopes (calendar.events, calendar.settings.readonly)
- âœ… Read upcoming events (30 days)
- âœ… Create events from AI chat
- âœ… Widget integration (Calendar tab - upcoming 3 events)
- âœ… AI calendar analysis (suggest optimal meeting times)
- âœ… Calendar reminders (push notifications)

**Closed Beta Scope:**
- âœ… CalendarPort architecture
- âœ… Google Calendar API v3 integration
- âœ… Read upcoming events (list)
- âœ… Create event (from chat or manual)
- âœ… Calendar widget tab (read-only view)
- âŒ Advanced: Edit/delete events, recurring events (MVP)
- âŒ AI suggestions: Optimal meeting times, schedule analysis (Epic 8)

---

## 2. Scope (Kapsam)

### **Calendar Integration (P0):**
- âœ… CalendarPort interface definition
- âœ… GoogleCalendarAdapter implementation
- âœ… OAuth scopes configuration
- âœ… Token storage (encrypted - Supabase vault)
- âœ… Read upcoming events (next 30 days)
- âœ… Create event (title, start, end, description)

### **Calendar UI (P0):**
- âœ… Calendar screen (upcoming events list)
- âœ… Event detail view (read-only)
- âœ… Add event form (from chat or manual)
- âœ… Widget calendar tab (upcoming 3 events)

### **Calendar Reminders (P1):**
- âœ… Push notification 10 min before event
- âœ… Trigger: Supabase cron job (check every minute)

### **NOT in Scope:**
- âŒ Edit/delete events (MVP)
- âŒ Recurring events support (MVP)
- âŒ Multi-calendar support (MVP)
- âŒ Calendar sync conflicts (MVP)
- âŒ AI schedule optimization (Epic 8)

---

## 3. User Stories (5 Stories - 26 Points)

### **Story 6.1: CalendarPort Architecture (5 points)**
- CalendarPort interface
- GoogleCalendarAdapter implementation
- OAuth scope configuration
- Token exchange (Edge Function)

### **Story 6.2: Read Upcoming Events (5 points)**
- Google Calendar API integration
- Fetch upcoming 30 days events
- Event data mapping (Google â†’ YBIS format)
- Caching strategy (TanStack Query - 5 min TTL)

### **Story 6.3: Create Event API (5 points)**
- Backend endpoint: `/api/calendar/events` (POST)
- Google Calendar API: insert event
- Validation (title, start, end required)
- Error handling (calendar access denied, invalid date)

### **Story 6.4: Calendar UI Screens (6 points)**
- Calendar screen (upcoming events list)
- Event detail view (read-only)
- Add event form (manual input)
- Widget calendar tab (top 3 events)

### **Story 6.5: Calendar Reminders (5 points)**
- Supabase cron: Check events (every minute)
- Trigger: 10 min before event start
- Push notification: "Meeting in 10 minutes: [title]"
- Edge Function: `/api/calendar/reminders`

---

## 4. Success Metrics

**Technical:**
- âœ… Calendar sync success rate >99%
- âœ… Event creation latency <2s
- âœ… Calendar widget load time <1s
- âœ… Reminder accuracy: 100% (no missed reminders)

**User:**
- âœ… 90%+ users connect Google Calendar
- âœ… 60%+ users create events via chat
- âœ… Calendar engagement: 5+ views per day

---

**Last Updated:** 2025-10-29  
**Story Points:** 26 (~4 hafta)
